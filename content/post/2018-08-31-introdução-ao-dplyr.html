---
title: Introdução ao dplyr
author: dadosaleatorios
date: '2018-08-31'
slug: introdução-ao-dplyr
categories:
  - analise de dados
  - data science
  - estatistica
  - iniciantes
  - linguagem R
---



<div id="o-que-e-o-dplyr-e-por-que-usa-lo" class="section level2">
<h2>O que é o dplyr e por que usá-lo?</h2>
<p><a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a> é um pacote do R para manipulação de dados, sendo um dos pacotes que forma o núcleo do <a href="https://www.tidyverse.org/"><code>tidyverse</code></a>. Se você nunca ouviu falar no <code>tidyverse</code>, ele é basicamente um pacote de pacotes que tem uma filosofia em comum, sendo cada pacote especializado em um tipo de tarefa, com a intenção de integrar todos eles facilmente em nosso script. O <code>dplyr</code> tem como base poucos verbos que resolvem boa parte dos problemas envolvendo manipulação de dados.</p>
<p>Um outro ponto é que o <code>dplyr</code> permite que nós façamos um código facilmente legível e compreensível, justamente pelo fato de usar verbos e também de permitir o encadeamento, que faz com que a sequência do código seja mais próxima da maneira com que pensamos. Além disso, o pacote é bem rápido, ainda que não seja tão rápido quanto o <code>data.table</code> (que não tem uma sintaxe simples de utilização).</p>
<p>As funções do <code>dplyr</code> podem ser utilizadas para manipular tabelas do SQL, sem importar a tabela para o R (utilizando lazy query), mas isso é assunto para um post futuro. Existe também uma comunidade grande de programadores do R que utilizam o pacote.</p>
<div id="instalacao" class="section level3">
<h3>Instalação</h3>
<p>Temos duas opções: Podemos instalar apenas o dplyr ou todo o tidyverse (recomendado):</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)
# Ou
install.packages(&quot;dplyr&quot;)

require(tidyerse) #ou require(dplyr)</code></pre>
</div>
</div>
<div id="dados" class="section level2">
<h2>Dados</h2>
<p>Neste post vamos apresentar as principais funções do pacote com exemplos, e para isso utilizaremos o dataset <code>starwars</code>, que pode ser utilizado ao ativar o <code>dplyr</code>. O dataset tem informações sobre personagens da saga, que foram coletados de uma <a href="http://swapi.co/">API de Star Wars</a>. Vamos dar uma olhada no dataset:</p>
<pre class="r"><code>starwars</code></pre>
<pre><code>## # A tibble: 87 x 13
##    name     height  mass hair_color skin_color eye_color birth_year gender
##    &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; 
##  1 Luke Sk~    172   77. blond      fair       blue            19.0 male  
##  2 C-3PO       167   75. &lt;NA&gt;       gold       yellow         112.  &lt;NA&gt;  
##  3 R2-D2        96   32. &lt;NA&gt;       white, bl~ red             33.0 &lt;NA&gt;  
##  4 Darth V~    202  136. none       white      yellow          41.9 male  
##  5 Leia Or~    150   49. brown      light      brown           19.0 female
##  6 Owen La~    178  120. brown, gr~ light      blue            52.0 male  
##  7 Beru Wh~    165   75. brown      light      blue            47.0 female
##  8 R5-D4        97   32. &lt;NA&gt;       white, red red             NA   &lt;NA&gt;  
##  9 Biggs D~    183   84. black      light      brown           24.0 male  
## 10 Obi-Wan~    182   77. auburn, w~ fair       blue-gray       57.0 male  
## # ... with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;,
## #   species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<p>Já podemos ver que não estamos lidando com um <code>data.frame</code> tradicional. Este é um <code>tibble</code>, que é, basicamente, um data.frame com uma série de modificações. A propósito, <a href="https://tibble.tidyverse.org/"><code>tibble</code></a> é outro pacote do <code>tidyverse</code>. Note que são mostradas as quantidades de linhas e colunas, apenas as 10 primeiras linhas são printadas, a classe das colunas é indicada, e, caso haja coluna(s) cujo conteúdo exceda o tamanho da janela, elas não são printadas, mas apenas listadas ao final.</p>
<p>Nesse <code>tibble</code> temos então, para 87 personagens de Star Wars, informações de nome, altura, massa, cor de cabelo, pele, dos olhos, idade na batalha de Yavin (quando os rebeldes destruíram a primeira estrela da morte), gênero, mundo natal, espécie, lista de filmes onde o personagem aparece,</p>
</div>
